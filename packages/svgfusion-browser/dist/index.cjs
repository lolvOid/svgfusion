'use strict';var svgfusionUtils=require('svgfusion-utils'),svgfusionCore=require('svgfusion-core');var A=Object.defineProperty;var R=(e,t,r)=>t in e?A(e,t,{enumerable:true,configurable:true,writable:true,value:r}):e[t]=r;var y=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var O=(e,t,r)=>R(e,t+"",r);var F=Object.defineProperty,j=(e,t,r)=>t in e?F(e,t,{enumerable:true,configurable:true,writable:true,value:r}):e[t]=r,P=(e=>typeof y<"u"?y:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof y<"u"?y:t)[r]}):e)(function(e){if(typeof y<"u")return y.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),w=(e,t,r)=>j(e,typeof t!="symbol"?t+"":t,r),G=class{parse(e){let t=this.cleanSvgContent(e),r=this.parseElement(t);return {root:r,viewBox:r.attributes.viewBox,width:r.attributes.width,height:r.attributes.height,namespace:r.attributes.xmlns}}extractColors(e){let t=[];return this.traverseElements(e.root,r=>{r.attributes.fill&&this.isValidColor(r.attributes.fill)&&t.push({value:r.attributes.fill,type:"fill",element:r,attribute:"fill"}),r.attributes.stroke&&this.isValidColor(r.attributes.stroke)&&t.push({value:r.attributes.stroke,type:"stroke",element:r,attribute:"stroke"}),r.attributes["stop-color"]&&this.isValidColor(r.attributes["stop-color"])&&t.push({value:r.attributes["stop-color"],type:"stop-color",element:r,attribute:"stop-color"});}),t}cleanSvgContent(e){return e.replace(/<\?xml[^>]*\?>/gi,"").replace(/<!--[\s\S]*?-->/g,"").trim()}parseElement(e){if(typeof globalThis.DOMParser<"u"){let t=new globalThis.DOMParser().parseFromString(e,"image/svg+xml");if(t.querySelector("parsererror"))throw new Error("Invalid SVG: XML parsing failed");let r=t.documentElement;if(r.tagName.toLowerCase()!=="svg")throw new Error("Invalid SVG: No svg element found");return this.convertDOMToSVGElement(r)}try{let t=(typeof P<"u"?P:function(){throw new Error("require not available")}())("jsdom"),{JSDOM:r}=t,o=new r(e,{contentType:"image/svg+xml"}).window.document.documentElement;if(o.tagName.toLowerCase()!=="svg")throw new Error("Invalid SVG: No svg element found");return this.convertDOMToSVGElement(o)}catch{return this.parseElementWithRegex(e)}}convertDOMToSVGElement(e){let t={tag:this.preserveSvgTagCase(e.tagName),attributes:{},children:[]};for(let r=0;r<e.attributes.length;r++){let o=e.attributes[r];t.attributes[o.name]=o.value;}for(let r=0;r<e.children.length;r++){let o=e.children[r];t.children.push(this.convertDOMToSVGElement(o));}return e.children.length===0&&e.textContent?.trim()&&(t.content=e.textContent.trim()),t}parseElementWithRegex(e){let t=e.match(/<svg([^>]*)>/i);if(!t)throw new Error("Invalid SVG: No svg element found");let r=this.parseAttributes(t[1]),o=this.parseChildren(e);return {tag:"svg",attributes:r,children:o}}parseAttributes(e){let t={},r=/(\w+(?:-\w+)*)=["']([^"']*)["']/g,o;for(;(o=r.exec(e))!==null;)t[o[1]]=o[2];return t}parseChildren(e){let t=[],r=e.match(/<svg[^>]*>(.*)<\/svg>/is);if(!r||!r[1])return t;let o=r[1],i=/<(\w+(?::\w+)?)([^>]*?)(?:\s*\/\s*>|>(.*?)<\/\1\s*>)/gs,s;for(;(s=i.exec(o))!==null;){let[,n,a,l]=s,p=this.parseAttributes(a),d={tag:n,attributes:p,children:[]};l!==void 0&&(l.includes("<")?d.children=this.parseNestedElements(l):l.trim()&&(d.content=l.trim())),t.push(d);}return t}parseNestedElements(e){let t=[],r=/<(\w+(?::\w+)?)([^>]*?)(?:\s*\/\s*>|>(.*?)<\/\1\s*>)/gs,o;for(;(o=r.exec(e))!==null;){let[,i,s,n]=o,a=this.parseAttributes(s),l={tag:i,attributes:a,children:[]};n!==void 0&&(n.includes("<")?l.children=this.parseNestedElements(n):n.trim()&&(l.content=n.trim())),t.push(l);}return t}traverseElements(e,t){t(e),e.children.forEach(r=>this.traverseElements(r,t));}preserveSvgTagCase(e){let t=e.toLowerCase();return {clippath:"clipPath",defs:"defs",foreignobject:"foreignObject",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath",use:"use"}[t]||t}isValidColor(e){return !e||e==="none"||e==="transparent"||e==="currentColor"?false:/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6}|[0-9A-Fa-f]{8})$/.test(e)||/^rgba?\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*(?:,\s*[\d.]+\s*)?\)$/.test(e)||/^hsla?\(\s*\d+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[\d.]+\s*)?\)$/.test(e)?true:["red","green","blue","black","white","yellow","cyan","magenta"].includes(e.toLowerCase())}},M=class{constructor(e={}){w(this,"options"),this.options={preserveOriginalNames:e.preserveOriginalNames??false,generateClasses:e.generateClasses??true,colorPrefix:e.colorPrefix??"color"};}extractColors(e){let t=[];this.traverseElement(e,t);let r=new Map;return t.forEach(o=>{this.isValidColor(o.value)&&r.set(o.value,o);}),Array.from(r.values()).sort((o,i)=>o.value.localeCompare(i.value))}apply(e){let t=this.extractColors(e),r=this.generateColorMappings(t),o=this.replaceColorsWithVariables(e,r);return {mappings:r,processedElement:o,originalColors:t.map(i=>i.value)}}generateColorMappings(e){return e.map((t,r)=>({originalColor:t.value,variableName:r===0?this.options.colorPrefix:`${this.options.colorPrefix}${r+1}`,type:t.type}))}replaceColorsWithVariables(e,t){let r=new Map(t.map(o=>[o.originalColor,o.variableName]));return this.transformElement(e,o=>{let i={...o.attributes};if(i.fill&&r.has(i.fill)&&(i.fill=`{${r.get(i.fill)}}`),i.stroke&&r.has(i.stroke)&&(i.stroke=`{${r.get(i.stroke)}}`),i["stop-color"]&&r.has(i["stop-color"])&&(i["stop-color"]=`{${r.get(i["stop-color"])}}`),i.style){let s=i.style,n=s.match(/fill:\s*([^;]+)/);if(n){let p=n[1].trim();r.has(p)&&(s=s.replace(/fill:\s*[^;]+/,`fill: {${r.get(p)}}`));}let a=s.match(/stroke:\s*([^;]+)/);if(a){let p=a[1].trim();r.has(p)&&(s=s.replace(/stroke:\s*[^;]+/,`stroke: {${r.get(p)}}`));}let l=s.match(/stop-color:\s*([^;]+)/);if(l){let p=l[1].trim();r.has(p)&&(s=s.replace(/stop-color:\s*[^;]+/,`stop-color: {${r.get(p)}}`));}i.style=s;}if(this.isDrawableElement(o.tag)){let s=o.attributes.fill!==void 0&&o.attributes.fill!=="",n=o.attributes.stroke!==void 0&&o.attributes.stroke!=="";s&&!n&&!i.stroke&&(i.stroke="none"),n&&!s&&!i.fill&&(i.fill="none");}return {...o,attributes:i}})}traverseElement(e,t){e.attributes.fill&&t.push({value:e.attributes.fill,type:"fill",element:e,attribute:"fill"}),e.attributes.stroke&&t.push({value:e.attributes.stroke,type:"stroke",element:e,attribute:"stroke"}),e.attributes["stop-color"]&&t.push({value:e.attributes["stop-color"],type:"stop-color",element:e,attribute:"stop-color"}),e.attributes.style&&this.extractColorsFromStyle(e.attributes.style).forEach(r=>{t.push({value:r.value,type:r.type,element:e,attribute:"style"});}),e.children.forEach(r=>this.traverseElement(r,t));}transformElement(e,t){let r=t(e);return {...r,children:r.children.map(o=>this.transformElement(o,t))}}isDrawableElement(e){return ["path","circle","ellipse","line","rect","polygon","polyline","text","tspan","use"].includes(e)}isValidColor(e){return !e||e==="none"||e==="transparent"||e==="currentColor"?false:/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6}|[0-9A-Fa-f]{8})$/.test(e)||/^rgba?\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*(?:,\s*[\d.]+\s*)?\)$/.test(e)||/^hsla?\(\s*\d+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[\d.]+\s*)?\)$/.test(e)?true:["red","green","blue","yellow","orange","purple","pink","brown","black","white","gray","grey","cyan","magenta","lime","navy"].includes(e.toLowerCase())}extractColorsFromStyle(e){let t=[],r=e.match(/fill:\s*([^;]+)/);if(r){let s=r[1].trim();this.isValidColor(s)&&t.push({value:s,type:"fill"});}let o=e.match(/stroke:\s*([^;]+)/);if(o){let s=o[1].trim();this.isValidColor(s)&&t.push({value:s,type:"stroke"});}let i=e.match(/stop-color:\s*([^;]+)/);if(i){let s=i[1].trim();this.isValidColor(s)&&t.push({value:s,type:"stop-color"});}return t}},z=class{constructor(e={}){w(this,"options"),this.options={preserveExisting:e.preserveExisting??true,onlyIfStrokePresent:e.onlyIfStrokePresent??true};}apply(e){let t=0;return {processedElement:this.transformElement(e,r=>this.shouldAddVectorEffect(r)?(t++,{...r,attributes:{...r.attributes,"vector-effect":"non-scaling-stroke"}}):r),elementsModified:t}}shouldAddVectorEffect(e){return this.options.preserveExisting&&e.attributes["vector-effect"]?false:["path","line","polyline","polygon","rect","circle","ellipse"].includes(e.tag)}transformElement(e,t){let r=t(e);return {...r,children:r.children.map(o=>this.transformElement(o,t))}}},D=class{constructor(e={}){w(this,"options"),this.options={preserveOriginalNames:e.preserveOriginalNames??false,strokeWidthPrefix:e.strokeWidthPrefix??"strokeWidth",generateClasses:e.generateClasses??true};}extractStrokeWidths(e){let t=[];this.traverseElement(e,t);let r=new Map;return t.forEach(o=>{this.isValidStrokeWidth(o.value)&&r.set(o.value,o);}),Array.from(r.values()).sort((o,i)=>{let s=parseFloat(o.value),n=parseFloat(i.value);return isNaN(s)&&isNaN(n)?o.value.localeCompare(i.value):isNaN(s)?1:isNaN(n)?-1:s-n})}apply(e){let t=this.extractStrokeWidths(e),r=this.generateStrokeWidthMappings(t),o=this.replaceStrokeWidthsWithVariables(e,r);return {mappings:r,processedElement:o,originalStrokeWidths:t.map(i=>i.value)}}traverseElement(e,t){if(e.attributes["stroke-width"]&&t.push({value:e.attributes["stroke-width"],element:e,attribute:"stroke-width"}),e.attributes.style){let r=this.extractStrokeWidthFromStyle(e.attributes.style);r&&t.push({value:r,element:e,attribute:"style",styleProperty:"stroke-width"});}e.children.forEach(r=>this.traverseElement(r,t));}extractStrokeWidthFromStyle(e){let t=e.match(/stroke-width\s*:\s*([^;]+)/);return t?t[1].trim():null}isValidStrokeWidth(e){return e==="inherit"||e==="none"||e==="initial"||e==="unset"||e.includes("var(")||e.includes("calc(")?false:/^[\d.]+(?:px|pt|pc|in|cm|mm|em|rem|ex|ch|vw|vh|vmin|vmax|%)?$/.test(e.trim())}generateStrokeWidthMappings(e){return e.map((t,r)=>({originalStrokeWidth:t.value,variableName:r===0?this.options.strokeWidthPrefix:`${this.options.strokeWidthPrefix}${r+1}`}))}replaceStrokeWidthsWithVariables(e,t){let r=new Map(t.map(o=>[o.originalStrokeWidth,o.variableName]));return this.transformElement(e,o=>{let i={...o.attributes};if(i["stroke-width"]&&r.has(i["stroke-width"])&&(i["stroke-width"]=`{${r.get(i["stroke-width"])}}`),i.style){let s=i.style;r.forEach((n,a)=>{let l=new RegExp(`stroke-width\\s*:\\s*${this.escapeRegExp(a)}`,"g");s=s.replace(l,`stroke-width: {${n}}`);}),i.style=s;}return {...o,attributes:i}})}transformElement(e,t){let r=t(e);return {...r,children:r.children.map(o=>this.transformElement(o,t))}}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},B=class{constructor(e={}){w(this,"options"),this.options={addRole:e.addRole??true,addAriaHidden:e.addAriaHidden??false,addTitle:e.addTitle??true,addDesc:e.addDesc??true,defaultRole:e.defaultRole??"img",preserveExisting:e.preserveExisting??true};}apply(e){let t=[];if(e.tag!=="svg")return {processedElement:e,attributesAdded:t};let r={...e.attributes};return this.options.addRole&&(!this.options.preserveExisting||!r.role)&&(r.role=this.options.defaultRole,t.push("role")),this.options.addAriaHidden&&(!this.options.preserveExisting||!r["aria-hidden"])&&(r["aria-hidden"]="true",t.push("aria-hidden")),this.options.addTitle&&t.push("title-support"),this.options.addDesc&&t.push("desc-support"),this.options.addTitle&&this.options.addDesc&&(!this.options.preserveExisting||!r["aria-labelledby"])?(r["aria-labelledby"]="{titleId} {descId}",t.push("aria-labelledby")):this.options.addTitle&&(!this.options.preserveExisting||!r["aria-labelledby"])&&(r["aria-labelledby"]="{titleId}",t.push("aria-labelledby")),{processedElement:{...e,attributes:r},attributesAdded:t}}generateProps(){let e=[];return this.options.addTitle&&e.push("title?: string","titleId?: string"),this.options.addDesc&&e.push("desc?: string","descId?: string"),e}generateJSXElements(e){let t=[];return e==="react"?(this.options.addDesc&&t.push("{desc ? <desc id={descId}>{desc}</desc> : null}"),this.options.addTitle&&t.push("{title ? <title id={titleId}>{title}</title> : null}")):(this.options.addDesc&&t.push('<desc v-if="desc" :id="descId">{{ desc }}</desc>'),this.options.addTitle&&t.push('<title v-if="title" :id="titleId">{{ title }}</title>')),t.join(`
    `)}},L=class{constructor(e){this.options=e;}apply(e){return this.options.enabled?this.normalizeElements(e):e}normalizeElements(e){return e.map(t=>this.transformElement(t,r=>{let o={...r.attributes};if(this.isDrawableElement(r.tag)){let i=r.attributes.fill!==void 0&&r.attributes.fill!=="",s=r.attributes.stroke!==void 0&&r.attributes.stroke!=="";i&&!s&&(o.stroke="none"),s&&!i&&(o.fill="none");}return {...r,attributes:o}}))}transformElement(e,t){let r=t(e);return r.children&&(r.children=r.children.map(o=>this.transformElement(o,t))),r}isDrawableElement(e){return ["path","circle","ellipse","line","rect","polygon","polyline","text","tspan","use"].includes(e)}},q=class{transform(e,t={}){let{optimize:r=true,splitColors:o=false,splitStrokeWidths:i=false,fixedStrokeWidth:s=false,normalizeFillStroke:n=false,accessibility:a=true,removeComments:l=true,removeDuplicates:p=true,minifyPaths:d=false}=t,h=this.deepCloneAst(e),u=[],c=[],f=[];return r&&(this.applyOptimizations(h,{removeComments:l,removeDuplicates:p,minifyPaths:d&&!o}),u.push("optimization")),o&&(c=this.applySplitColors(h),u.push("split-colors")),i&&(f=this.applySplitStrokeWidths(h),u.push("split-stroke-widths")),s&&(this.applyFixedStrokeWidth(h),u.push("fixed-stroke-width")),n&&(this.applyFillStrokeNormalization(h),u.push("normalize-fill-stroke")),a&&(this.applyAccessibility(h),u.push("accessibility")),{ast:h,colorMappings:c,strokeWidthMappings:f,metadata:{originalColors:c.map(g=>g.originalColor),originalStrokeWidths:f.map(g=>g.originalStrokeWidth),optimizationApplied:r,features:u,hasClassAttributes:this.hasClassAttributes(h)}}}applySplitColors(e){let t=new M({generateClasses:true,colorPrefix:"color"}).apply(e.root);return e.root=t.processedElement,t.mappings}applyFixedStrokeWidth(e){let t=new z({onlyIfStrokePresent:false,preserveExisting:true}).apply(e.root);e.root=t.processedElement;}applyAccessibility(e){let t=new B({addRole:true,addTitle:true,addDesc:true,defaultRole:"img",preserveExisting:true}).apply(e.root);e.root=t.processedElement;}applyFillStrokeNormalization(e){let t=new L({enabled:true});e.root.children=t.apply(e.root.children);}applyOptimizations(e,t){t.removeDuplicates&&this.removeDuplicateElements(e),t.minifyPaths&&this.minifyPaths(e),this.removeEmptyGroups(e);}removeDuplicateElements(e){}minifyPaths(e){this.traverseElements(e.root,t=>{t.tag==="path"&&t.attributes.d&&(t.attributes.d=t.attributes.d.replace(/\s+/g," ").replace(/([MLHVCSQTAZ])\s+/gi,"$1").trim());});}removeEmptyGroups(e){let t=r=>(r.children=r.children.filter(t),!(r.tag==="g"&&r.children.length===0&&!r.content));e.root.children=e.root.children.filter(t);}traverseElements(e,t){t(e),e.children.forEach(r=>this.traverseElements(r,t));}isValidColor(e){return !e||e==="none"||e==="transparent"||e==="currentColor"?false:/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6}|[0-9A-Fa-f]{8})$/.test(e)||/^rgba?\(.+\)$/.test(e)||/^hsla?\(.+\)$/.test(e)}deepCloneAst(e){return {...e,root:this.deepCloneElement(e.root)}}deepCloneElement(e){return {...e,attributes:{...e.attributes},children:e.children.map(t=>this.deepCloneElement(t))}}hasClassAttributes(e){let t=r=>r.attributes.class||r.attributes.className?true:r.children.some(o=>t(o));return t(e.root)}applySplitStrokeWidths(e){let t=new D({generateClasses:true,strokeWidthPrefix:"strokeWidth"}).apply(e.root);return e.root=t.processedElement,t.mappings}},W=class{constructor(){w(this,"parser"),w(this,"transformer"),this.parser=new G,this.transformer=new q;}extractColors(e){let t=this.parser.parse(e),r=this.parser.extractColors(t);return Array.from(new Set(r.map(o=>o.value))).sort()}validate(e){let t=[];try{let r=this.parser.parse(e);r.root||t.push("No root SVG element found"),!r.viewBox&&!r.width&&!r.height&&t.push("SVG should have viewBox or width/height attributes");}catch(r){t.push(r instanceof Error?r.message:String(r));}return {valid:t.length===0,errors:t}}async convert(e,t,r){try{let o=this.parser.parse(e),i=this.transformer.transform(o,t.transformation);return {...await new r(t.generator).generate(i),metadata:i.metadata}}catch(o){throw new Error(`SVG conversion failed: ${o instanceof Error?o.message:String(o)}`)}}};var Z=Object.defineProperty,Q=(e,t,r)=>t in e?Z(e,t,{enumerable:true,configurable:true,writable:true,value:r}):e[t]=r,K=(e,t,r)=>Q(e,t+"",r),N=class extends svgfusionCore.ComponentGenerator{constructor(e={}){super(e),K(this,"reactOptions"),this.reactOptions={...this.options,memo:e.memo??true,forwardRef:e.forwardRef??true,propTypes:e.propTypes??false,defaultProps:e.defaultProps??false,namedExport:e.namedExport??false};}async formatCode(e,t){try{let{format:r}=await import('prettier');return await r(e,{parser:t,semi:!0,singleQuote:!0,trailingComma:"es5",tabWidth:2,printWidth:80,bracketSpacing:!0,arrowParens:"avoid"})}catch(r){return console.warn("Prettier formatting failed or not available, using unformatted code:",r),e}}async generate(e){let t=this.getComponentName(),{colorMappings:r,strokeWidthMappings:o,metadata:i}=e,s=this.generateImports(),n=this.generateInterfaces(r,o,i.features),a=this.generateComponent(e),l=this.generateExports(t),p=[s,n,a,l].filter(Boolean).join(`

`),d=this.reactOptions.typescript?"tsx":"jsx",h=this.generateFilename(t,d),u=d==="tsx"?"typescript":"babel";return {code:await this.formatCode(p,u),filename:h,componentName:t,dependencies:this.getDependencies()}}generateImports(){let e=[];if(this.reactOptions.typescript){let t=[];this.reactOptions.forwardRef&&(t.push("Ref"),t.push("forwardRef")),this.reactOptions.memo&&t.push("memo"),t.length>0?e.push(`import React, { ${t.join(", ")} } from 'react';`):e.push("import React from 'react';");}else {let t=[];this.reactOptions.forwardRef&&t.push("forwardRef"),this.reactOptions.memo&&t.push("memo"),t.length>0?e.push(`import React, { ${t.join(", ")} } from 'react';`):e.push("import React from 'react';"),this.reactOptions.propTypes&&e.push("import PropTypes from 'prop-types';");}return e.join(`
`)}generateInterfaces(e,t,r){return !this.reactOptions.typescript&&!this.reactOptions.propTypes?"":this.reactOptions.typescript?this.generateTypeScriptInterface(e,t,r):this.generatePropTypes(e,t,r)}generateTypeScriptInterface(e,t,r){let o=["title?: string;","titleId?: string;","desc?: string;","descId?: string;","size?: string | number;"],i=this.generateColorProps(e);i&&o.push(i);let s=this.generateStrokeWidthProps(t);return s&&o.push(s),r.includes("fixed-stroke-width")&&o.push("isFixedStrokeWidth?: boolean;"),`interface ${this.getComponentName()}Props extends React.SVGProps<SVGSVGElement> {
  ${o.join(`
  `)}
}`}generatePropTypes(e,t,r){let o=this.getComponentName(),i=["title: PropTypes.string,","titleId: PropTypes.string,","desc: PropTypes.string,","descId: PropTypes.string,","size: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),","className: PropTypes.string,","style: PropTypes.object,","width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),","height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),"],s=this.generateColorProps(e);s&&i.push(s);let n=this.generateStrokeWidthProps(t);return n&&i.push(n),r.includes("fixed-stroke-width")&&i.push("isFixedStrokeWidth: PropTypes.bool,"),`${o}.propTypes = {
  ${i.join(`
  `)}
};`}generateComponent(e){let t=this.getComponentName(),{colorMappings:r,strokeWidthMappings:o,metadata:i}=e,s=["title","titleId","desc","descId","size"],n=r.map(m=>m.variableName),a=r.map(m=>`${m.variableName}Class`),l=o.map(m=>m.variableName),p=o.map(m=>`${m.variableName}Class`),d=[...s,...n,...a,...l,...p],h=this.generateColorDefaults(r),u=this.generateStrokeWidthDefaults(o),c='size = "24"',f=i.features.includes("fixed-stroke-width")?"isFixedStrokeWidth = true":"",g=[c,h,u,f].filter(Boolean).join(", "),x=g.split(", ").map(m=>m.split(" = ")[0]),S=`{
    ${d.filter(m=>!x.includes(m)).join(`,
    `)},
    ${g},
    ...svgProps
  }`,$=this.generateSvgAttributes(e.ast),v="{title ? <title id={titleId}>{title}</title> : null}",E="{desc ? <desc id={descId}>{desc}</desc> : null}";if(this.reactOptions.typescript){let m=`${t}Props`,C=this.reactOptions.forwardRef?", ref: Ref<SVGSVGElement>":"",I=e.ast.root.children.map(V=>this.elementToJsx(V,1)).join(`
`);return `const ${t} = (${S}: ${m}${C}) => {
  const computedSize = {
    width: svgProps.width || size,
    height: svgProps.height || size
  };
  
  return (
    <svg
      ${this.reactOptions.forwardRef?`ref={ref}
      `:""}${$}
      {...svgProps}
      {...computedSize}
    >
      ${v}
      ${E}
${I}
    </svg>
  );
};`}else {let m=e.ast.root.children.map(C=>this.elementToJsx(C,1)).join(`
`);return `const ${t} = (${S}) => {
  const computedSize = size ? { width: size, height: size } : {};
  
  return (
    <svg ${$}{...computedSize} {...svgProps}>
      ${v}
      ${E}
${m}
    </svg>
  );
};`}}generateExports(e){let t=[];return this.reactOptions.forwardRef?(t.push(`const ForwardRef = forwardRef(${e});`),this.reactOptions.memo?(t.push("const Memo = memo(ForwardRef);"),this.reactOptions.exportDefault&&t.push("export default Memo;"),this.reactOptions.namedExport&&t.push(`export { Memo as ${e} };`)):(this.reactOptions.exportDefault&&t.push("export default ForwardRef;"),this.reactOptions.namedExport&&t.push(`export { ForwardRef as ${e} };`))):this.reactOptions.memo?(t.push(`const Memo = memo(${e});`),this.reactOptions.exportDefault&&t.push("export default Memo;"),this.reactOptions.namedExport&&t.push(`export { Memo as ${e} };`)):(this.reactOptions.exportDefault&&t.push(`export default ${e};`),this.reactOptions.namedExport&&t.push(`export { ${e} };`)),t.join(`
`)}getDependencies(){let e=["react"];return this.reactOptions.propTypes&&e.push("prop-types"),e}generateSvgAttributes(e){let t=[],r={...e.root.attributes||{},...e.viewBox&&{viewBox:e.viewBox},...e.namespace&&{xmlns:e.namespace},...e.width&&{width:e.width},...e.height&&{height:e.height}},o=r.viewBox;return Object.entries(r).forEach(([i,s])=>{if(s!=null){if(o&&(i==="width"||i==="height"))return;if(i==="aria-labelledby"&&typeof s=="string"&&s.includes("{")){let n=s.replace(/\{(\w+)\}/g,"${$1}");t.push(`aria-labelledby={\`${n}\`}`);}else t.push(`${i}="${s}"`);}}),t.length>0?t.join(`
      `)+`
      `:""}elementToJsx(e,t=0){let r="  ".repeat(t+1),{tag:o,attributes:i,children:s,content:n}=e,a=this.attributesToJsxWithClasses(i),l=a.length>0?" "+a.join(" "):"";if(s.length===0&&!n)return `${r}<${o}${l} />`;let p=`${r}<${o}${l}>`;return n&&(p+=n),s.length>0&&(p+=`
`,p+=s.map(d=>this.elementToJsx(d,t+1)).join(`
`),p+=`
`+r),p+=`</${o}>`,p}attributesToJsxWithClasses(e){let t=[],r=[],o="class"in e||"className"in e;if(Object.entries(e).forEach(([i,s])=>{let n=svgfusionUtils.toReactProp(i);if(i==="vector-effect"&&s==="non-scaling-stroke")t.push("vectorEffect={isFixedStrokeWidth ? 'non-scaling-stroke' : 'none'}");else if((i==="fill"||i==="stroke")&&s.startsWith("{")&&s.endsWith("}")){let a=s.slice(1,-1);t.push(`${n}=${s}`);let l=`${a}Class`;r.push(l);}else if(i==="stroke-width"&&s.startsWith("{")&&s.endsWith("}")){let a=s.slice(1,-1);t.push(`${n}=${s}`);let l=`${a}Class`;r.push(l);}else if(i==="style"){let a=this.parseStyleString(s),l=Object.entries(a).map(([p,d])=>{if(typeof d=="string"&&d.startsWith("{")&&d.endsWith("}")){let h=d.slice(1,-1);if(p==="strokeWidth"){let u=`${h}Class`;r.push(u);}return `${p}: ${h}`}else return `${p}: '${d}'`});t.push(`style={{ ${l.join(", ")} }}`);}else s.startsWith("{")&&s.endsWith("}")?t.push(`${n}=${s}`):t.push(`${n}="${s}"`);}),r.length>0){let i=e.class||e.className;if(r.length===1)i?t.push(`className={\`${i} \${${r[0]}}\`}`):t.push(`className={${r[0]}}`);else {let s=r.map(n=>`\${${n}}`).join(" ");i?t.push(`className={\`${i} ${s}\`}`):t.push(`className={\`${s}\`}`);}}else if(o){let i=e.class||e.className;i&&t.push(`className="${i}"`);}return t}parseStyleString(e){let t={};return e.split(";").forEach(r=>{let o=r.indexOf(":");if(o>0){let i=r.slice(0,o).trim(),s=r.slice(o+1).trim();if(i&&s){let n=svgfusionUtils.camelCase(i);t[n]=s;}}}),t}};var Y=Object.defineProperty,_=(e,t,r)=>t in e?Y(e,t,{enumerable:true,configurable:true,writable:true,value:r}):e[t]=r,ee=(e,t,r)=>_(e,t+"",r),T=class extends svgfusionCore.ComponentGenerator{constructor(e={}){super(e),ee(this,"vueOptions"),this.vueOptions={...this.options,composition:e.composition??true,scriptSetup:e.scriptSetup??true,sfc:e.sfc??true,defineComponent:e.defineComponent??false,useDefineOptions:e.useDefineOptions??false};}async formatCode(e,t){try{let{format:r}=await import('prettier');return await r(e,{parser:t,semi:!0,singleQuote:!0,trailingComma:"es5",tabWidth:2,printWidth:80,bracketSpacing:!0,arrowParens:"avoid",htmlWhitespaceSensitivity:"ignore",vueIndentScriptAndStyle:!0})}catch(r){return console.warn("Prettier formatting failed or not available, using unformatted code:",r),e}}async generate(e){let t=this.getComponentName(),r;this.vueOptions.sfc?r=this.generateSFC(e):r=this.generateJSComponent(e);let o=this.vueOptions.sfc?"vue":this.vueOptions.typescript?"ts":"js",i=this.generateFilename(t,o),s=this.vueOptions.sfc?"vue":this.vueOptions.typescript?"typescript":"babel";return {code:await this.formatCode(r,s),filename:i,componentName:t,dependencies:this.getDependencies()}}generateSFC(e){let t=this.generateTemplate(e),r=this.generateScript(e),o=this.generateStyle();return `<template>
${t}
</template>

<script${this.vueOptions.scriptSetup?" setup":""}${this.vueOptions.typescript?' lang="ts"':""}>
${this.vueOptions.scriptSetup&&this.vueOptions.useDefineOptions?`defineOptions({ inheritAttrs: false });

`:""}${r}
</script>

${o?`<style scoped>
${o}
</style>`:""}`}generateJSComponent(e){return this.vueOptions.composition?this.generateCompositionAPI(e):this.generateOptionsAPI(e)}generateTemplate(e){let{ast:t}=e,r=this.generateSvgAttributes(t),o=t.root.children.map(i=>this.elementToVueTemplate(i,2)).join(`
`);return `  <svg${r} v-bind="$attrs" :width="computedWidth" :height="computedHeight">
    <title v-if="props.title" :id="props.titleId">{{ props.title }}</title>
    <desc v-if="props.desc" :id="props.descId">{{ props.desc }}</desc>
${o}
  </svg>`}elementToVueTemplate(e,t=0){let r="  ".repeat(t),{tag:o,attributes:i,children:s,content:n}=e,a=[],l=[],p="class"in i;if(Object.entries(i).forEach(([u,c])=>{if(u==="vector-effect"&&c==="non-scaling-stroke")a.push(`:vector-effect="props.isFixedStrokeWidth ? 'non-scaling-stroke' : 'none'"`);else if(u==="style"){let f=this.parseStyleStringForVue(c);a.push(`:style="${f}"`);let g=this.extractClassVarsFromStyle(c);l.push(...g);}else if(c.startsWith("{")&&c.endsWith("}")){let f=c.slice(1,-1);if(a.push(`:${u}="props.${f}"`),u==="fill"||u==="stroke"||u==="stroke-width"){let g=`${f}Class`;l.push(`props.${g}`);}}else a.push(`${u}="${c}"`);}),l.length>0){let u=i.class;u?a.push(`:class="[${l.join(", ")}, '${u}']"`):a.push(`:class="[${l.join(", ")}]"`);}else if(p){let u=i.class;u&&a.push(`class="${u}"`);}let d=a.length>0?" "+a.join(" "):"";if(s.length===0&&!n)return `${r}<${o}${d} />`;let h=`${r}<${o}${d}>`;return n&&(h+=n),s.length>0&&(h+=`
`,h+=s.map(u=>this.elementToVueTemplate(u,t+1)).join(`
`),h+=`
`+r),h+=`</${o}>`,h}generateScript(e){return this.vueOptions.scriptSetup?this.generateScriptSetup(e):this.vueOptions.composition?this.generateCompositionAPI(e):this.generateOptionsAPI(e)}generateScriptSetup(e){let{colorMappings:t,strokeWidthMappings:r,metadata:o}=e,i=[];if(this.vueOptions.typescript?(i.push('import type { SVGAttributes } from "vue";'),i.push('import { computed } from "vue";'),i.push("")):(i.push('import { computed } from "vue";'),i.push("")),this.vueOptions.typescript){i.push("interface Props extends /* @vue-ignore */ SVGAttributes {"),i.push("  title?: string;"),i.push("  titleId?: string;"),i.push("  desc?: string;"),i.push("  descId?: string;"),i.push("  width?: string | number;"),i.push("  height?: string | number;"),i.push("  size?: string | number;");let s=this.generateColorPropsInterface(t);s&&i.push(s);let n=this.generateStrokeWidthPropsInterface(r);n&&i.push(n),o.features.includes("fixed-stroke-width")&&i.push("  isFixedStrokeWidth?: boolean;"),i.push("}"),i.push(""),i.push("const props = withDefaults(defineProps<Props>(), {");}else i.push("const props = defineProps({"),i.push("  title: { type: String, default: '' },"),i.push("  titleId: { type: String, default: '' },"),i.push("  desc: { type: String, default: '' },"),i.push("  descId: { type: String, default: '' },"),i.push("  class: { type: String, default: '' },"),i.push("  style: { type: Object, default: '' },"),i.push("  width: { type: [String, Number], default: '' },"),i.push("  height: { type: [String, Number], default: '' },"),i.push('  size: { type: [String, Number], default: "24" },');return this.vueOptions.typescript&&i.push('  size: "24",'),t.forEach(s=>{let n=s.variableName,a=s.originalColor,l=`${n}Class`;this.vueOptions.typescript?(i.push(`  ${n}: '${a}',`),i.push(`  ${l}: "",`)):(i.push(`  ${n}: { type: String, default: '${a}' },`),i.push(`  ${l}: { type: String, default: "" },`));}),r.forEach(s=>{let n=s.variableName,a=s.originalStrokeWidth,l=`${n}Class`;this.vueOptions.typescript?(i.push(`  ${n}: '${a}',`),i.push(`  ${l}: "",`)):(i.push(`  ${n}: { type: [String, Number], default: '${a}' },`),i.push(`  ${l}: { type: String, default: "" },`));}),o.features.includes("fixed-stroke-width")&&(this.vueOptions.typescript?i.push("  isFixedStrokeWidth: true,"):i.push("  isFixedStrokeWidth: { type: Boolean, default: true },")),i.push("});"),i.push(""),i.push("const computedWidth = computed(() => props.width || props.size);"),i.push("const computedHeight = computed(() => props.height || props.size);"),i.join(`
`)}generateCompositionAPI(e){let{colorMappings:t,strokeWidthMappings:r,metadata:o}=e,i=this.getComponentName(),s=[];return s.push("import { defineComponent, computed } from 'vue';"),s.push(""),s.push("export default defineComponent({"),s.push(`  name: '${i}',`),s.push("  props: {"),s.push("    title: { type: String, default: '' },"),s.push("    titleId: { type: String, default: '' },"),s.push("    desc: { type: String, default: '' },"),s.push("    descId: { type: String, default: '' },"),s.push("    class: { type: String, default: '' },"),s.push("    style: { type: Object, default: '' },"),s.push("    width: { type: [String, Number], default: '' },"),s.push("    height: { type: [String, Number], default: '' },"),s.push('    size: { type: [String, Number], default: "24" },'),t.forEach(n=>{let a=n.variableName,l=n.originalColor,p=`${a}Class`;s.push(`    ${a}: { type: String, default: '${l}' },`),s.push(`    ${p}: { type: String, default: "" },`);}),r.forEach(n=>{let a=n.variableName,l=n.originalStrokeWidth,p=`${a}Class`;s.push(`    ${a}: { type: [String, Number], default: '${l}' },`),s.push(`    ${p}: { type: String, default: "" },`);}),o.features.includes("fixed-stroke-width")&&s.push("    isFixedStrokeWidth: { type: Boolean, default: true },"),s.push("  },"),s.push("  setup(props) {"),s.push("    const computedWidth = computed(() => props.width || props.size);"),s.push("    const computedHeight = computed(() => props.height || props.size);"),s.push("    return { computedWidth, computedHeight };"),s.push("  },"),s.push("});"),s.join(`
`)}generateOptionsAPI(e){let{colorMappings:t,strokeWidthMappings:r,metadata:o}=e,i=this.getComponentName(),s=[];return s.push("export default {"),s.push(`  name: '${i}',`),s.push("  props: {"),s.push("    title: { type: String, default: '' },"),s.push("    titleId: { type: String, default: '' },"),s.push("    desc: { type: String, default: '' },"),s.push("    descId: { type: String, default: '' },"),s.push("    class: { type: String, default: '' },"),s.push("    style: { type: Object, default: '' },"),s.push("    width: { type: [String, Number], default: '' },"),s.push("    height: { type: [String, Number], default: '' },"),s.push('    size: { type: [String, Number], default: "24" },'),t.forEach(n=>{let a=n.variableName,l=n.originalColor,p=`${a}Class`;s.push(`    ${a}: { type: String, default: '${l}' },`),s.push(`    ${p}: { type: String, default: "" },`);}),r.forEach(n=>{let a=n.variableName,l=n.originalStrokeWidth,p=`${a}Class`;s.push(`    ${a}: { type: [String, Number], default: '${l}' },`),s.push(`    ${p}: { type: String, default: "" },`);}),o.features.includes("fixed-stroke-width")&&s.push("    isFixedStrokeWidth: { type: Boolean, default: true },"),s.push("  },"),s.push("  computed: {"),s.push("    computedWidth() {"),s.push("      return this.width || this.size;"),s.push("    },"),s.push("    computedHeight() {"),s.push("      return this.height || this.size;"),s.push("    },"),s.push("  },"),s.push("};"),s.join(`
`)}generateStyle(){return ""}generateColorPropsInterface(e){return e.length===0?"":e.map(t=>{let r=t.variableName,o=`${r}Class`;return `  ${r}?: string;
  ${o}?: string;`}).join(`
`)}generateStrokeWidthPropsInterface(e){return e.length===0?"":e.map(t=>{let r=t.variableName,o=`${r}Class`;return `  ${r}?: string | number;
  ${o}?: string;`}).join(`
`)}parseStyleStringForVue(e){let t=[];return e.split(";").forEach(r=>{let o=r.indexOf(":");if(o>0){let i=r.slice(0,o).trim(),s=r.slice(o+1).trim();if(i&&s)if(s.startsWith("{")&&s.endsWith("}")){let n=s.slice(1,-1);t.push(`'${i}': props.${n}`);}else t.push(`'${i}': '${s}'`);}}),`{ ${t.join(", ")} }`}generateSvgAttributes(e){let t=[],r={...e.root.attributes||{},...e.viewBox&&{viewBox:e.viewBox},...e.namespace&&{xmlns:e.namespace},...e.width&&{width:e.width},...e.height&&{height:e.height}};r.xmlns||(r.xmlns="http://www.w3.org/2000/svg");let o=r.viewBox;return Object.entries(r).forEach(([i,s])=>{if(s!=null){if(o&&(i==="width"||i==="height"))return;if(i==="aria-labelledby"&&typeof s=="string"&&s.includes("{")){let n=s.replace(/\{(\w+)\}/g,"${props.$1}");t.push(` :aria-labelledby="\`${n}\`"`);}else t.push(` ${i}="${s}"`);}}),t.join("")}getDependencies(){return ["vue"]}extractClassVarsFromStyle(e){let t=[];return e.split(";").forEach(r=>{let o=r.indexOf(":");if(o>0){let i=r.slice(0,o).trim(),s=r.slice(o+1).trim();if(i&&s&&s.startsWith("{")&&s.endsWith("}")){let n=s.slice(1,-1);if(i==="fill"||i==="stroke"||i==="stroke-width"){let a=`props.${n}Class`;t.push(a);}}}}),t}};var b=class{constructor(){O(this,"engine");this.engine=new W;}async convert(t,r){let{framework:o,typescript:i=true,componentName:s="Icon",prefix:n,suffix:a,splitColors:l=false,splitStrokeWidths:p=false,fixedStrokeWidth:d=false,normalizeFillStroke:h=false,memo:u=true,forwardRef:c=true,sfc:f=true,scriptSetup:g=true,optimize:x=true}=r,S={framework:o,transformation:{splitColors:l,splitStrokeWidths:p,fixedStrokeWidth:d,normalizeFillStroke:h,optimize:x,accessibility:true},generator:o==="react"?{typescript:i,componentName:s,prefix:n,suffix:a,memo:u,forwardRef:c,exportDefault:true,namedExport:false}:{typescript:i,componentName:s,prefix:n,suffix:a,sfc:f,scriptSetup:g,composition:true,exportDefault:true}},$={react:N,vue:T},v=await this.engine.convert(t,S,$[o]);return {code:v.code,componentName:v.componentName,filename:v.filename,framework:o,typescript:i,metadata:v.metadata,dependencies:v.dependencies}}extractColors(t){return this.engine.extractColors(t)}validate(t){let r=[],o=t.trim();if(!o)return {valid:false,errors:["SVG content is empty"]};if(!o.includes("<svg"))return {valid:false,errors:["No <svg> element found"]};if(typeof DOMParser<"u"){let n=new DOMParser().parseFromString(o,"application/xml").querySelector("parsererror");if(n)return r.push("Invalid XML/SVG structure: "+(n.textContent?.trim()||"XML parsing failed")),{valid:false,errors:r};this.validateXMLStructure(o,r);}else this.validateWithRegex(o,r);return {valid:r.length===0,errors:r}}validateXMLStructure(t,r){if(/\w+\s*=\s*"[^"]*<[a-zA-Z]/g.test(t)){r.push("Invalid XML/SVG structure: Malformed attribute syntax");return}if(/\w+\s*=\s*"[^"]*"[^>\s]*<[^>]*>/g.test(t)){r.push("Invalid XML/SVG structure: Invalid characters in attributes");return}if(/^\s*[a-zA-Z-]+\s*=\s*"/gm.test(t)){let n=t.split(`
`);for(let a=0;a<n.length;a++){let l=n[a].trim();if(/^[a-zA-Z-]+\s*=\s*"/.test(l)){let p=false;for(let d=a-1;d>=0;d--){let h=n[d].trim();if(h.includes("<svg")||h.includes("<")&&h.includes("=")){p=true;break}if(h.includes("</")||h.includes("/>"))break}if(!p){r.push("Invalid XML/SVG structure: Malformed tag structure");return}}}}}validateWithRegex(t,r){this.validateXMLStructure(t,r);}async convertBatch(t,r){let o=[];for(let{content:i,name:s}of t){let n=await this.convert(i,{...r,componentName:s});o.push(n);}return o}generateIndexFile(t,r={}){let{exportType:o="named",typescript:i=true}=r,s=t[0]?.framework||"react",n=[...t].sort((l,p)=>l.componentName.localeCompare(p.componentName)),a="";if(o==="named"){a+=`// Auto-generated index file for tree-shaking
`,a+=`// This file exports all components for optimal bundling

`;for(let l of n){let p=this.getImportPath(l.filename,s);a+=`export { default as ${l.componentName} } from './${p}';
`;}if(i){a+=`
// TypeScript component types
`,s==="vue"?a+=`export type IconComponent = any;
`:a+=`export type IconComponent = React.ComponentType<React.SVGProps<SVGSVGElement>>;
`,a+=`export type IconComponents = {
`;for(let l of n)a+=`  ${l.componentName}: IconComponent;
`;a+=`};
`;}}else {a+=`// Auto-generated index file
`,a+=`// Warning: Default exports are less tree-shakeable

`;for(let l of n){let p=this.getImportPath(l.filename,s);a+=`import ${l.componentName} from './${p}';
`;}a+=`
export default {
`;for(let l of n)a+=`  ${l.componentName},
`;a+=`};
`,a+=`
// Individual exports for flexibility
`;for(let l of n)a+=`export { default as ${l.componentName} } from './${this.getImportPath(l.filename,s)}';
`;}return a}getImportPath(t,r){return r==="vue"&&t.endsWith(".vue")?t:t.replace(/\.(tsx?|jsx?|vue)$/,"")}};async function Ne(e,t={}){return new b().convert(e,{...t,framework:"react"})}async function Te(e,t={}){return new b().convert(e,{...t,framework:"vue"})}async function Ie(e,t){return new b().convertBatch(e,t)}function Ve(e){return new b().extractColors(e)}function Ae(e){return new b().validate(e)}Object.defineProperty(exports,"formatComponentName",{enumerable:true,get:function(){return svgfusionUtils.formatComponentName}});Object.defineProperty(exports,"pascalCase",{enumerable:true,get:function(){return svgfusionUtils.pascalCase}});Object.defineProperty(exports,"sanitizeComponentName",{enumerable:true,get:function(){return svgfusionUtils.sanitizeComponentName}});Object.defineProperty(exports,"svgToComponentName",{enumerable:true,get:function(){return svgfusionUtils.svgToComponentName}});exports.SVGFusionBrowser=b;exports.convertBatch=Ie;exports.convertToReact=Ne;exports.convertToVue=Te;exports.extractColors=Ve;exports.validateSvg=Ae;